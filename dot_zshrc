source $HOME/.profile
source $HOME/.config/shell/functions
source $HOME/.config/shell/alias

PS1="%B%~ $(chk_current_sh zsh)%% %b"
HISTFILE=
HISTSIZE=1000
SAVEHIST=
unsetopt autocd beep
bindkey -e
bindkey "^[[1;5C" forward-word
bindkey "^[[1;5D" backward-word
bindkey "^L" clear-screen

p_wrap() {
    p
    zle reset-prompt
}

zle -N p "p_wrap"
bindkey "^P" p

open-fm() {
    dbus-send --session \
              --dest=org.freedesktop.FileManager1 \
              --type=method_call \
              /org/freedesktop/FileManager1 \
              org.freedesktop.FileManager1.ShowFolders \
              array:string:"file://${PWD}" \
              string:""

    zle reset-prompt
}

zle -N open-fm
bindkey "^F" open-fm

backward-kill-dir () {
    local WORDCHARS=${WORDCHARS/\/}
    zle backward-kill-word
}

# Make Meta-BS work like other shells
zle -N backward-kill-dir
bindkey '^[^?' backward-kill-dir

eval "$(zoxide init zsh)"

alias luamake=/home/andry/.lsp/lua-language-server/3rd/luamake/luamake
